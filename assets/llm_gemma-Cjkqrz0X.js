import{s as ys,a as xs}from"./navigation-BcvLzd7M.js";import{r as Gi,c as Qn,f as Jt,p as Es}from"./utility-CeoLs25M.js";import{A as Ss}from"./config-YF015oXS.js";var zt=typeof self<"u"?self:{};function Hi(e){e:{for(var t=["CLOSURE_FLAGS"],n=zt,i=0;i<t.length;i++)if((n=n[t[i]])==null){t=null;break e}t=n}return(e=t&&t[e])!=null&&e}let vs;const Ts=typeof TextEncoder<"u";function Vi(e){if(Ts)e=(vs||=new TextEncoder).encode(e);else{let n=0;const i=new Uint8Array(3*e.length);for(let r=0;r<e.length;r++){var t=e.charCodeAt(r);if(128>t)i[n++]=t;else{if(2048>t)i[n++]=t>>6|192;else{if(55296<=t&&57343>=t){if(56319>=t&&r<e.length){const s=e.charCodeAt(++r);if(56320<=s&&57343>=s){t=1024*(t-55296)+s-56320+65536,i[n++]=t>>18|240,i[n++]=t>>12&63|128,i[n++]=t>>6&63|128,i[n++]=63&t|128;continue}r--}t=65533}i[n++]=t>>12|224,i[n++]=t>>6&63|128}i[n++]=63&t|128}}e=n===i.length?i:i.subarray(0,n)}return e}var nt,Wi=Hi(610401301),As=Hi(188588736);const Yn=zt.navigator;function hn(e){return!!Wi&&!!nt&&nt.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1)}function Q(e){var t;return(t=zt.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function ye(){return!!Wi&&!!nt&&0<nt.brands.length}function en(){return ye()?hn("Chromium"):(Q("Chrome")||Q("CriOS"))&&!(!ye()&&Q("Edge"))||Q("Silk")}nt=Yn&&Yn.userAgentData||null;var Is=!ye()&&(Q("Trident")||Q("MSIE"));!Q("Android")||en(),en(),Q("Safari")&&(en()||!ye()&&Q("Coast")||!ye()&&Q("Opera")||!ye()&&Q("Edge")||(ye()?hn("Microsoft Edge"):Q("Edg/"))||ye()&&hn("Opera"));var qi={},Xe=null;function Os(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):"=.".indexOf(e[t-1])!=-1&&(n="=.".indexOf(e[t-2])!=-1?n-2:n-1);var i=new Uint8Array(n),r=0;return function(s,o){function a(g){for(;l<s.length;){var v=s.charAt(l++),A=Xe[v];if(A!=null)return A;if(!/^[\s\xa0]*$/.test(v))throw Error("Unknown base64 encoding at char: "+v)}return g}Zi();for(var l=0;;){var u=a(-1),c=a(0),f=a(64),h=a(64);if(h===64&&u===-1)break;o(u<<2|c>>4),f!=64&&(o(c<<4&240|f>>2),h!=64&&o(f<<6&192|h))}}(e,function(s){i[r++]=s}),r!==n?i.subarray(0,r):i}function Zi(){if(!Xe){Xe={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var i=e.concat(t[n].split(""));qi[n]=i;for(var r=0;r<i.length;r++){var s=i[r];Xe[s]===void 0&&(Xe[s]=r)}}}}var Ki=typeof Uint8Array<"u",Xi=!Is&&typeof btoa=="function";function Jn(e){if(!Xi){var t;t===void 0&&(t=0),Zi(),t=qi[t];var n=Array(Math.floor(e.length/3)),i=t[64]||"";let l=0,u=0;for(;l<e.length-2;l+=3){var r=e[l],s=e[l+1],o=e[l+2],a=t[r>>2];r=t[(3&r)<<4|s>>4],s=t[(15&s)<<2|o>>6],o=t[63&o],n[u++]=a+r+s+o}switch(a=0,o=i,e.length-l){case 2:o=t[(15&(a=e[l+1]))<<2]||i;case 1:e=e[l],n[u]=t[e>>2]+t[(3&e)<<4|a>>4]+o+i}return n.join("")}for(t="",n=0,i=e.length-10240;n<i;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}const ei=/[-_.]/g,Ls={"-":"+",_:"/",".":"="};function Rs(e){return Ls[e]||""}function ti(e){if(!Xi)return Os(e);ei.test(e)&&(e=e.replace(ei,Rs)),e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function it(e){return Ki&&e!=null&&e instanceof Uint8Array}let Ps;var rt={};let Ms;function Qi(e){if(e!==rt)throw Error("illegal external caller")}function tn(){return Ms||=new Ee(null,rt)}var Ee=class{constructor(e,t){if(Qi(t),this.i=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};function ni(e){if(typeof e=="string")return{buffer:ti(e),v:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),v:!1};if(e.constructor===Uint8Array)return{buffer:e,v:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),v:!1};if(e.constructor===Ee){Qi(rt);var t=e.i;return{buffer:((t=t==null||it(t)?t:typeof t=="string"?ti(t):null)==null?t:e.i=t)||(Ps||=new Uint8Array(0)),v:!0}}if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),v:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Sn(){return typeof BigInt=="function"}let Bs,L=0,M=0;function ze(e){const t=0>e;let n=(e=Math.abs(e))>>>0;if(e=Math.floor((e-n)/4294967296),t){const[i,r]=vn(n,e);e=r,n=i}L=n>>>0,M=e>>>0}function It(e,t){if(e>>>=0,2097151>=(t>>>=0))var n=""+(4294967296*t+e);else Sn()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,1e7<=e&&(n+=Math.floor(e/1e7),e%=1e7),1e7<=n&&(t+=Math.floor(n/1e7),n%=1e7),n=t+ii(n)+ii(e));return n}function ii(e){return e=String(e),"0000000".slice(e.length)+e}function jt(e){if(16>e.length)ze(Number(e));else if(Sn())e=BigInt(e),L=Number(e&BigInt(4294967295))>>>0,M=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");M=L=0;const n=e.length;for(let i=t,r=(n-t)%6+t;r<=n;i=r,r+=6){const s=Number(e.slice(i,r));M*=1e6,L=1e6*L+s,4294967296<=L&&(M+=Math.trunc(L/4294967296),M>>>=0,L>>>=0)}if(t){const[i,r]=vn(L,M);L=i,M=r}}}function vn(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function ri(e){return e?/^\d+$/.test(e)?(jt(e),new si(L,M)):null:Ns||=new si(0,0)}var si=class{constructor(e,t){this.j=e>>>0,this.i=t>>>0}};let Ns;function oi(e){return e?/^-?\d+$/.test(e)?(jt(e),new ai(L,M)):null:$s||=new ai(0,0)}var ai=class{constructor(e,t){this.j=e>>>0,this.i=t>>>0}};let $s;function Ot(e,t,n){for(;0<n||127<t;)e.i.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.i.push(t)}function le(e,t){for(;127<t;)e.i.push(127&t|128),t>>>=7;e.i.push(t)}function Ft(e,t){if(0<=t)le(e,t);else{for(let n=0;9>n;n++)e.i.push(127&t|128),t>>=7;e.i.push(1)}}function Lt(e,t){t.length!==0&&(e.l.push(t),e.j+=t.length)}function Tn(e,t){return le(e.i,8*t+2),t=e.i.end(),Lt(e,t),t.push(e.j),t}function An(e,t){var n=t.pop();for(n=e.j+e.i.length()-n;127<n;)t.push(127&n|128),n>>>=7,e.j++;t.push(n),e.j++}function Rt(e,t,n){le(e.i,8*t+2),le(e.i,n.length),Lt(e,e.i.end()),Lt(e,n)}class ue{constructor(t,n){this.i=t,this.N=n}}function be(e){return Array.prototype.slice.call(e)}function Yi(e){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():e}var ce=Yi(),nn=Yi("2ex"),Ji=ce?(e,t)=>{e[ce]|=t}:(e,t)=>{e.i!==void 0?e.i|=t:Object.defineProperties(e,{i:{value:t,configurable:!0,writable:!0,enumerable:!1}})},li=ce?(e,t)=>{e[ce]&=~t}:(e,t)=>{e.i!==void 0&&(e.i&=~t)};function D(e,t,n){return n?e|t:e&~t}var G=ce?e=>0|e[ce]:e=>0|e.i,H=ce?e=>e[ce]:e=>e.i,R=ce?(e,t)=>(e[ce]=t,e):(e,t)=>(e.i!==void 0?e.i=t:Object.defineProperties(e,{i:{value:t,configurable:!0,writable:!0,enumerable:!1}}),e);function Cs(e,t){R(t,-14591&(0|e))}function fn(e,t){R(t,-14557&(34|e))}function er(e){return(e=e>>14&1023)===0?536870912:e}var In,Gt={},Ds={};function ci(e){return!(!e||typeof e!="object"||e.i!==Ds)}function On(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function Pt(e,t,n){if(!Array.isArray(e)||e.length)return!1;const i=G(e);return!!(1&i)||!(!t||!(Array.isArray(t)?t.includes(n):t.has(n)))&&(R(e,1|i),!0)}const ui=[];function Ge(e){if(2&e)throw Error()}R(ui,55),In=Object.freeze(ui);function tr(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}let Us;function zs(){const e=Error();tr(e,"incident"),function(t){zt.setTimeout(()=>{throw t},0)}(e)}function st(e){return tr(e=Error(e),"warning"),e}function rn(e){if(e!=null&&typeof e!="number")throw Error(`Value of float/double field must be a number, found ${typeof e}: ${e}`);return e}Object.freeze(new class{}),Object.freeze(new class{});const js=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function nr(e){const t=typeof e;return t==="number"?Number.isFinite(e):t==="string"&&js.test(e)}function ir(e){if(typeof e!="number"||!Number.isFinite(e))throw st("int32");return 0|e}function rr(e){return e==null?e:ir(e)}function lt(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?0|e:void 0}function hi(e){if(e!=null){if(typeof e!="number"||!Number.isFinite(e))throw st("uint32");e>>>=0}return e}function fi(e){if(e==null)return e;if(typeof e=="string"){if(!e)return;e=+e}return typeof e=="number"&&Number.isFinite(e)?e>>>0:void 0}function pi(e){return e[0]!=="-"&&(20>e.length||e.length===20&&184467>Number(e.substring(0,6)))}function sr(e){return e==null||typeof e=="string"?e:void 0}function or(e,t,n){if(e!=null&&typeof e=="object"&&e.K===Gt)return e;if(Array.isArray(e)){var i=G(e),r=i;return r===0&&(r|=32&n),(r|=2&n)!==i&&R(e,r),new t(e)}}let Mt,Fs,Gs;function ar(e,t,n){if(e==null&&(e=Mt),Mt=void 0,e==null){var i=96;n?(e=[n],i|=512):e=[],t&&(i=-16760833&i|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(i=G(e)))throw Error("farr");if(64&i)return e;if(i|=64,n&&(i|=512,n!==e[0]))throw Error("mid");e:{const r=(n=e).length;if(r){const s=r-1;if(On(n[s])){if(1024<=(t=s-(+!!(512&(i|=256))-1)))throw Error("pvtlmt");i=-16760833&i|(1023&t)<<14;break e}}if(t){if(1024<(t=Math.max(t,r-(+!!(512&i)-1))))throw Error("spvt");i=-16760833&i|(1023&t)<<14}}}return R(e,i),e}function lr(e,t,n,i,r){if(e!=null){if(Array.isArray(e))e=Pt(e,void 0,0)?void 0:r&&2&G(e)?e:Ht(e,t,n,i!==void 0,r);else if(On(e)){const s={};for(let o in e)s[o]=lr(e[o],t,n,i,r);e=s}else e=t(e,i);return e}}function Ht(e,t,n,i,r){const s=i||n?G(e):0;i=i?!!(32&s):void 0,e=be(e);for(let o=0;o<e.length;o++)e[o]=lr(e[o],t,n,i,r);return n&&n(s,e),e}function cr(e){return e.K===Gt?e.toJSON():function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(Pt(t,void 0,0))return}else{if(it(t))return Jn(t);if(t instanceof Ee){const n=t.i;return n==null?"":typeof n=="string"?n:t.i=Jn(n)}}}return t}(e)}function ur(e,t,n=fn){if(e!=null){if(Ki&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var i=G(e);return 2&i||(t&&=i===0||!!(32&i)&&!(64&i||!(16&i)),e=t?R(e,-12293&(34|i)):Ht(e,ur,4&i?fn:n,!0,!0)),e}return e.K===Gt&&(n=e.m,e=2&(i=H(n))?e:hr(e,n,i,!0)),e}}function hr(e,t,n,i){return e=e.constructor,Mt=t=function(r,s,o){const a=o||2&s?fn:Cs,l=!!(32&s);return r=function(u,c,f){var h=(u=be(u)).length;const g=256&c?u[h-1]:void 0;for(h+=g?-1:0,c=512&c?1:0;c<h;c++)u[c]=f(u[c]);if(g){c=u[c]={};for(const v in g)c[v]=f(g[v])}return u}(r,s,u=>ur(u,l,a)),Ji(r,32|(o?2:0)),r}(t,n,i),t=new e(t),Mt=void 0,t}function fr(e){const t=e.m,n=H(t);return 2&n?hr(e,t,n,!1):e}function pr(e,t,n,i){return!(4&t)||n!=null}function di(e){return ct(e=e.m,H(e),2)}function gi(e,t,n,i){if(!(0>(t=i+(+!!(512&t)-1))||t>=e.length||t>=n))return e[t]}function ct(e,t,n,i){if(n===-1)return null;const r=er(t);if(!(n>=r)){var s=e.length;return i&&256&t&&(i=e[s-1][n])!=null?(gi(e,t,r,n)&&nn!=null&&(4<=(t=(e=Us??={})[nn]||0)||(e[nn]=t+1,zs())),i):gi(e,t,r,n)}return 256&t?e[e.length-1][n]:void 0}function Je(e,t,n){const i=e.m;let r=H(i);return Ge(r),F(i,r,t,n),e}function F(e,t,n,i,r){const s=er(t);if(n>=s||r){let o=t;if(256&t)r=e[e.length-1];else{if(i==null)return o;r=e[s+(+!!(512&t)-1)]={},o|=256}return r[n]=i,n<s&&(e[n+(+!!(512&t)-1)]=void 0),o!==t&&R(e,o),o}return e[n+(+!!(512&t)-1)]=i,256&t&&n in(e=e[e.length-1])&&delete e[n],t}function dr(e,t,n){return e=ct(e,t,n),Array.isArray(e)?e:In}function gr(e,t){return e===0&&(e=Be(e,t)),D(e,1,!0)}function et(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function br(e,t,n){{const a=e.m;let l=H(a);if(Ge(l),n==null)F(a,l,t);else{var i,r=G(n),s=r,o=!!(2&r)||Object.isFrozen(n);if((i=!o)&&(i=!1),pr(e,r))for(r=21,o&&(n=be(n),s=0,r=je(r=Be(r,l),l,!0)),e=0;e<n.length;e++)n[e]=ir(n[e]);i&&(n=be(n),s=0,r=je(r=Be(r,l),l,!0)),r!==s&&R(n,r),F(a,l,t,n)}}}function ee(e,t,n,i){e=e.m;let r=H(e);Ge(r),F(e,r,t,(i==="0"?Number(n)===0:n===i)?void 0:n)}function mr(e,t,n){var i=e.m,r=H(i),s=ct(i,r,n,!1);return(t=or(s,t,r))!==s&&t!=null&&F(i,r,n,t,!1),(i=t)==null||(e=e.m,2&(r=H(e))||(s=fr(i))!==i&&F(e,r,n,i=s,!1)),i}function Se(e,t,n){return n==null&&(n=void 0),Je(e,t,n)}function Be(e,t){return e=D(e,2,!!(2&t)),e=D(e,32,!0),D(e,2048,!1)}function je(e,t,n){return 32&t&&n||(e=D(e,32,!1)),e}function Qe(e,t,n,i){e=e.m;var r=H(e);Ge(r);var s=!!(2&r);const o=s?1:2;h&&=!s,s=dr(e,r,t);var a=G(s);const l=!!(4&a);if(!l){var u=s,c=r,f=!!(2&(a=gr(a,r)));f&&(c=D(c,2,!0));let g=!f,v=!0,A=0,W=0;for(;A<u.length;A++){const he=or(u[A],n,c);if(he instanceof n){if(!f){const Te=!!(2&G(he.m));g&&=!Te,v&&=Te}u[W++]=he}}W<A&&(u.length=W),a=D(a,4,!0),a=D(a,16,v),a=D(a,8,g),R(u,a),f&&Object.freeze(u)}if(h&&!(8&a||!s.length&&(o===1||o===4&&32&a))){et(a)&&(s=be(s),a=Be(a,r),r=F(e,r,t,s));var h=s;for(u=a,a=0;a<h.length;a++)(c=h[a])!==(f=fr(c))&&(h[a]=f);u=D(u,8,!0),u=D(u,16,!h.length),R(h,u),a=u}et(a)||(h=a,(a=(u=o===1||o===4&&!!(32&a))?D(a,!s.length||16&a&&(!l||32&a)?2:2048,!0):je(a,r,!0))!==h&&R(s,a),u&&Object.freeze(s)),o===2&&et(a)&&(s=be(s),a=je(a=Be(a,r),r,!0),R(s,a),F(e,r,t,s)),t=s,n=i??new n,t.push(n),2&G(n.m)?li(t,8):li(t,16)}function re(e,t,n){ee(e,t,rr(n),0)}function U(e,t,n){if(n!=null&&typeof n!="string")throw Error();ee(e,t,n,"")}function w(e,t,n){e=e.m;const i=H(e);Ge(i);var r=2&i;let s=ct(e,i,t);Array.isArray(s)||(s=In);const o=!!(32&i);let a=G(s);if(a===0&&o&&!r?(a|=33,R(s,a)):1&a||(a|=1,R(s,a)),r?(2&a||Ji(s,34),Object.freeze(s)):(2&a||2048&a)&&(s=be(s),r=1,o&&(r|=32),R(s,r),F(e,i,t,s)),typeof n!="string")throw Error();s.push(n)}var N=class{constructor(e,t){this.m=ar(e,t)}toJSON(){return _r(this,Ht(this.m,cr,void 0,void 0,!1),!0)}v(){return!!(2&G(this.m))}};function _r(e,t,n){var i=As?void 0:e.constructor.A;const r=H(n?e.m:t);if(!(e=t.length))return t;let s,o;if(On(n=t[e-1])){e:{var a=n;let c={},f=!1;for(var l in a){let h=a[l];if(Array.isArray(h)){let g=h;(Pt(h,i,+l)||ci(h)&&h.size===0)&&(h=null),h!=g&&(f=!0)}h!=null?c[l]=h:f=!0}if(f){for(var u in c){a=c;break e}a=null}}a!=n&&(s=!0),e--}for(l=+!!(512&r)-1;0<e&&(n=t[u=e-1],u-=l,n==null||Pt(n,i,u)||ci(n)&&n.size===0);e--)o=!0;return(s||o)&&(t=Array.prototype.slice.call(t,0,e),a&&t.push(a)),t}function Ln(e,t){if(Array.isArray(t)){var n=G(t);if(4&n)return t;for(var i=0,r=0;i<t.length;i++){const s=e(t[i]);s!=null&&(t[r++]=s)}return r<i&&(t.length=r),R(t,-12289&(5|n)),2&n&&Object.freeze(t),t}}N.prototype.K=Gt,N.prototype.toString=function(){return _r(this,this.m,!1).toString()};const Hs=Symbol(),bi=Symbol();function wr(e){let t=e[bi];if(!t){const n=Vt(e);t=(i,r)=>kr(i,r,n),e[bi]=t}return t}const sn=Symbol();function Vs(e){return e.i}function Ws(e,t){let n,i;const r=e.i;return(s,o,a)=>r(s,o,a,i||=Vt(t).i,n||=wr(t))}function Vt(e){var t=e[sn];if(t)return t;var n=Vs,i=Ws;(t=e[sn]={}).i=function(h){switch(typeof h){case"boolean":return Fs||=[0,void 0,!0];case"number":return 0<h?void 0:h===0?Gs||=[0,void 0]:[-h,void 0];case"string":return[0,h];case"object":return h}}(e[0]);let r=0;var s=e[++r];s&&s.constructor===Object&&(t.R=s,typeof(s=e[++r])=="function"&&(t.l=s,t.j=e[++r],s=e[++r]));const o={};for(;Array.isArray(s)&&typeof s[0]=="number"&&0<s[0];){for(var a=0;a<s.length;a++)o[s[a]]=s;s=e[++r]}for(a=1;s!==void 0;){let h;typeof s=="number"&&(a+=s,s=e[++r]);var l=void 0;if(s instanceof ue?h=s:(h=Qs,r--),h.N){s=e[++r],l=e;var u=r;typeof s=="function"&&(s=s(),l[u]=s),l=s}let g=a+1;for(typeof(s=e[++r])=="number"&&0>s&&(g-=s,s=e[++r]);a<g;a++){var c=o[a];u=t;var f=a;c=l?i(h,l):n(h),u[f]=c}}return qs in e&&Hs in e&&sn in e&&(e.length=0),t}const qs=Symbol();function mi(e,t){var n=e[t];if(n)return n;if((n=e.R)&&(n=n[t])){var i=(n=Array.isArray(n)?n[0]instanceof ue?n:[Xs,n]:[n,void 0])[0].i;if(n=n[1]){const r=wr(n),s=Vt(n).i;n=(n=e.j)?n(s,r):(o,a,l)=>i(o,a,l,s,r)}else n=i;return e[t]=n}}function kr(e,t,n){var i=H(e),r=+!!(512&i)-1,s=e.length,o=512&i?1:0;const a=s+(256&i?-1:0);for(;o<a;o++){const l=e[o];if(l==null)continue;const u=o-r,c=mi(n,u);c&&c(t,l,u)}if(256&i){e=e[s-1];for(let l in e)i=+l,Number.isNaN(i)||(r=e[l])!=null&&(s=mi(n,i))&&s(t,r,i)}}function V(e){return new ue(e,!1)}function Rn(e,t,n){(t=lt(t))!=null&&t!=null&&(le(e.i,8*n),Ft(e.i,t))}function yr(e,t,n){(t=t==null||typeof t=="boolean"?t:typeof t=="number"?!!t:void 0)!=null&&(le(e.i,8*n),e.i.i.push(t?1:0))}function Pn(e,t,n){(t=sr(t))!=null&&Rt(e,n,Vi(t))}function Wt(e,t,n,i,r){(t=t instanceof N?t.m:Array.isArray(t)?ar(t,i[0],i[1]):void 0)!=null&&(n=Tn(e,n),r(t,e),An(e,n))}function xr(e,t,n){(t=lt(t))!=null&&(t=parseInt(t,10),le(e.i,8*n),Ft(e.i,t))}var J,pn=V(function(e,t,n){(t=t==null||typeof t=="number"?t:t==="NaN"||t==="Infinity"||t==="-Infinity"?Number(t):void 0)!=null&&(le(e.i,8*n+5),e=e.i,(n=Bs||=new DataView(new ArrayBuffer(8))).setFloat32(0,+t,!0),M=0,t=L=n.getUint32(0,!0),e.i.push(t>>>0&255),e.i.push(t>>>8&255),e.i.push(t>>>16&255),e.i.push(t>>>24&255))}),on=V(function(e,t,n){e:if(t!=null){if(nr(t)){if(typeof t=="string"){var i=Math.trunc(Number(t));if(Number.isSafeInteger(i))t=String(i);else if((i=t.indexOf("."))!==-1&&(t=t.substring(0,i)),!(t[0]==="-"?20>t.length||t.length===20&&-922337<Number(t.substring(0,7)):19>t.length||t.length===19&&922337>Number(t.substring(0,6))))if(jt(t),t=L,2147483648&(i=M))if(Sn())t=""+(BigInt(0|i)<<BigInt(32)|BigInt(t>>>0));else{const[s,o]=vn(t,i);t="-"+It(s,o)}else t=It(t,i);break e}if(typeof t=="number"){if(t=Math.trunc(t),!Number.isSafeInteger(t)){ze(t),i=L;var r=M;(t=2147483648&r)&&(r=~r>>>0,(i=1+~i>>>0)==0&&(r=r+1>>>0)),i=4294967296*r+(i>>>0),t=t?-i:i}break e}}t=void 0}t!=null&&(typeof t=="string"&&oi(t),t!=null&&(le(e.i,8*n),typeof t=="number"?(e=e.i,ze(t),Ot(e,L,M)):(n=oi(t),Ot(e.i,n.j,n.i))))}),Zs=V(function(e,t,n){e:if(t!=null){if(nr(t)){if(typeof t=="string"){var i=Math.trunc(Number(t));Number.isSafeInteger(i)&&0<=i?t=String(i):((i=t.indexOf("."))!==-1&&(t=t.substring(0,i)),pi(t)||(jt(t),t=It(L,M)));break e}if(typeof t=="number"){t=0<=(t=Math.trunc(t))&&Number.isSafeInteger(t)?t:function(r){if(0>r){ze(r);const s=It(L,M);return r=Number(s),Number.isSafeInteger(r)?r:s}return pi(String(r))?r:(ze(r),4294967296*M+(L>>>0))}(t);break e}}t=void 0}t!=null&&(typeof t=="string"&&ri(t),t!=null&&(le(e.i,8*n),typeof t=="number"?(e=e.i,ze(t),Ot(e,L,M)):(n=ri(t),Ot(e.i,n.j,n.i))))}),St=V(Rn),Bt=new ue(function(e,t,n){if((t=Ln(lt,t))!=null&&t.length){n=Tn(e,n);for(let i=0;i<t.length;i++)Ft(e.i,t[i]);An(e,n)}},!1),B=V(Rn),Ks=V(Rn),ge=V(yr),te=V(yr),K=new ue(function(e,t,n){if((t=Ln(sr,t))!=null)for(let o=0;o<t.length;o++){var i=e,r=n,s=t[o];s!=null&&Rt(i,r,Vi(s))}},!1),X=V(Pn),Er=V(Pn),j=V(Pn),Xs=new ue(Wt,!0),Qs=new ue(Wt,!0);J=new ue(function(e,t,n,i,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)Wt(e,t[s],n,i,r)},!0);var de=new ue(Wt,!0),Ye=V(xr),Sr=new ue(function(e,t,n){if((t=Ln(lt,t))!=null&&t.length){n=Tn(e,n);for(let i=0;i<t.length;i++)Ft(e.i,t[i]);An(e,n)}},!1),Re=V(xr);function qt(e){return function(){const t=new class{constructor(){this.l=[],this.j=0,this.i=new class{constructor(){this.i=[]}length(){return this.i.length}end(){const o=this.i;return this.i=[],o}}}};kr(this.m,t,Vt(e)),Lt(t,t.i.end());const n=new Uint8Array(t.j),i=t.l,r=i.length;let s=0;for(let o=0;o<r;o++){const a=i[o];n.set(a,s),s+=a.length}return t.l=[n],n}}function an(e,t){if(t!=null)if(Array.isArray(t))Je(e,2,Ht(t,cr,void 0,void 0,!1));else{if(!(typeof t=="string"||t instanceof Ee||it(t)))throw Error("invalid value in Any.value field: "+t+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");if(t!=null){if(typeof t=="string")t=t?new Ee(t,rt):tn();else if(t.constructor!==Ee){if(!it(t))throw Error();t=t.length?new Ee(new Uint8Array(t),rt):tn()}}ee(e,2,t,tn())}}var De=class extends N{constructor(e){super(e)}},vr=[0,X,V(function(e,t,n){if(t!=null){if(t instanceof N){const i=t.Y;return void(i&&(t=i(t),t!=null&&Rt(e,n,ni(t).buffer)))}if(Array.isArray(t))return}(t=t==null||typeof t=="string"||it(t)||t instanceof Ee?t:void 0)!=null&&Rt(e,n,ni(t).buffer)})],Tr={},Ys=[-2,Tr,ge];Tr[336783863]=[0,j,ge,-1,St,[0,[1,2,3,4,5,6],de,[0],de,[0,ge,j,ge,Ye,-1,Sr,j,-1,[0,ge,-1],Ye],de,[0,j,-2],de,[0,St,ge,-4],de,[0,St,Ye,ge,-1,Bt,Ye,-1],de,[0,j]],[0,j],ge,[0,[1,3],[2,4],de,[0,Bt],-1,de,[0,K],-1,J,[0,j,-1]],j];var _i=class extends N{constructor(e){super(e)}},Js=[0,X,te],Ar=[0,on,-1,te,-3,on,Bt,X,B,on,-1,te,B,te,-2,X],ut=[-1,{}],Ir=[0,j,1,ut],Or=[0,j,K,ut],se=class extends N{constructor(t){super(t,500)}J(t){return Se(this,7,t)}};se.A=[3,4,5,6,8,13,17,1005];var eo=[-500,X,-1,K,-3,Ys,J,vr,B,-1,Ir,Or,J,Js,X,Ar,B,K,987,K],to=[0,X,-1,ut],no=[-500,j,-1,[-1,{}],998,j],io=[-500,j,K,-1,[-2,{},ge],997,K,-1],ro=[-500,j,K,ut,998,K];function we(e,t){Qe(e,1,se,t)}var dn=class extends N{constructor(){super(void 0,500)}J(e){return Se(this,1001,e)}};dn.A=[1,6,7,9,10,15,16,17,14,1002],dn.prototype.i=qt([-500,J,eo,4,J,no,J,io,B,J,ro,K,B,Ir,Or,J,to,K,-2,Ar,X,-1,te,979,ut,J,vr]);var wi=class extends N{constructor(e){super(e)}};let mt;const so=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Lr(){if(mt===void 0)try{await WebAssembly.instantiate(so),mt=!0}catch{mt=!1}return mt}async function We(e,t=""){const n=await Lr()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${n}.js`,wasmBinaryPath:`${t}/${e}_${n}.wasm`}}var Le=class{};function oo(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&1<=e.length&&17<=Number(e[1])))}async function ki(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise((n,i)=>{t.addEventListener("load",()=>{n()},!1),t.addEventListener("error",r=>{i(r)},!1),document.body.appendChild(t)})}importScripts(e.toString())}Le.forVisionTasks=function(e){return We("vision",e)},Le.forTextTasks=function(e){return We("text",e)},Le.forGenAiExperimentalTasks=function(e){return We("genai_experimental",e)},Le.forGenAiTasks=function(e){return We("genai",e)},Le.forAudioTasks=function(e){return We("audio",e)},Le.isSimdSupported=function(){return Lr()};function m(e,t,n){e.o||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.h.stringToNewUTF8(t)),e.h._free(t)}function yi(e,t,n){e.o||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const i=new Uint32Array(t.length);for(let r=0;r<t.length;r++)i[r]=e.h.stringToNewUTF8(t[r]);t=e.h._malloc(4*i.length),e.h.HEAPU32.set(i,t>>2),n(t);for(const r of i)e.h._free(r);e.h._free(t)}function ke(e,t,n){e.h.simpleListeners=e.h.simpleListeners||{},e.h.simpleListeners[t]=n}function Oe(e,t,n){let i=[];e.h.simpleListeners=e.h.simpleListeners||{},e.h.simpleListeners[t]=(r,s,o)=>{s?(n(i,o),i=[]):i.push(r)}}const ao=(xi=class{constructor(e,t){this.l=!0,this.h=e,this.i=null,this.j=0,this.o=typeof this.h._addIntToInputStream=="function",t!==void 0?this.h.canvas=t:oo()?this.h.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.h.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const n=e.length,i=this.h._malloc(n);this.h.HEAPU8.set(e,i),t?this.h._changeBinaryGraph(n,i):this.h._changeTextGraph(n,i),this.h._free(i)}configureAudio(e,t,n,i,r){this.h._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),m(this,i||"input_audio",s=>{m(this,r=r||"audio_header",o=>{this.h._configureAudio(s,o,e,t,n)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.h._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.h.gpuOriginForWebTexturesIsBottomLeft=e}attachErrorListener(e){this.h.errorListener=e}attachEmptyPacketListener(e,t){this.h.emptyPacketListeners=this.h.emptyPacketListeners||{},this.h.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,i,r){const s=4*e.length;this.j!==s&&(this.i&&this.h._free(this.i),this.i=this.h._malloc(s),this.j=s),this.h.HEAPF32.set(e,this.i/4),m(this,i,o=>{this.h._addAudioToInputStream(this.i,t,n,o,r)})}addGpuBufferToStream(e,t,n){m(this,t,i=>{if(!this.h.canvas)throw Error("No OpenGL canvas configured.");i?this.h._bindTextureToStream(i):this.h._bindTextureToCanvas();const r=this.h.canvas.getContext("webgl2")||this.h.canvas.getContext("webgl");if(!r)throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const[s,o]=e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height];!this.l||s===this.h.canvas.width&&o===this.h.canvas.height||(this.h.canvas.width=s,this.h.canvas.height=o);const[a,l]=[s,o];this.h._addBoundTextureToStream(i,a,l,n)})}addBoolToStream(e,t,n){m(this,t,i=>{this.h._addBoolToInputStream(e,i,n)})}addDoubleToStream(e,t,n){m(this,t,i=>{this.h._addDoubleToInputStream(e,i,n)})}addFloatToStream(e,t,n){m(this,t,i=>{this.h._addFloatToInputStream(e,i,n)})}addIntToStream(e,t,n){m(this,t,i=>{this.h._addIntToInputStream(e,i,n)})}addUintToStream(e,t,n){m(this,t,i=>{this.h._addUintToInputStream(e,i,n)})}addStringToStream(e,t,n){m(this,t,i=>{m(this,e,r=>{this.h._addStringToInputStream(r,i,n)})})}addStringRecordToStream(e,t,n){m(this,t,i=>{yi(this,Object.keys(e),r=>{yi(this,Object.values(e),s=>{this.h._addFlatHashMapToInputStream(r,s,Object.keys(e).length,i,n)})})})}addProtoToStream(e,t,n,i){m(this,n,r=>{m(this,t,s=>{const o=this.h._malloc(e.length);this.h.HEAPU8.set(e,o),this.h._addProtoToInputStream(o,e.length,s,r,i),this.h._free(o)})})}addEmptyPacketToStream(e,t){m(this,e,n=>{this.h._addEmptyPacketToInputStream(n,t)})}addBoolVectorToStream(e,t,n){m(this,t,i=>{const r=this.h._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const s of e)this.h._addBoolVectorEntry(r,s);this.h._addBoolVectorToInputStream(r,i,n)})}addDoubleVectorToStream(e,t,n){m(this,t,i=>{const r=this.h._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const s of e)this.h._addDoubleVectorEntry(r,s);this.h._addDoubleVectorToInputStream(r,i,n)})}addFloatVectorToStream(e,t,n){m(this,t,i=>{const r=this.h._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const s of e)this.h._addFloatVectorEntry(r,s);this.h._addFloatVectorToInputStream(r,i,n)})}addIntVectorToStream(e,t,n){m(this,t,i=>{const r=this.h._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const s of e)this.h._addIntVectorEntry(r,s);this.h._addIntVectorToInputStream(r,i,n)})}addUintVectorToStream(e,t,n){m(this,t,i=>{const r=this.h._allocateUintVector(e.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const s of e)this.h._addUintVectorEntry(r,s);this.h._addUintVectorToInputStream(r,i,n)})}addStringVectorToStream(e,t,n){m(this,t,i=>{const r=this.h._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const s of e)m(this,s,o=>{this.h._addStringVectorEntry(r,o)});this.h._addStringVectorToInputStream(r,i,n)})}addBoolToInputSidePacket(e,t){m(this,t,n=>{this.h._addBoolToInputSidePacket(e,n)})}addDoubleToInputSidePacket(e,t){m(this,t,n=>{this.h._addDoubleToInputSidePacket(e,n)})}addFloatToInputSidePacket(e,t){m(this,t,n=>{this.h._addFloatToInputSidePacket(e,n)})}addIntToInputSidePacket(e,t){m(this,t,n=>{this.h._addIntToInputSidePacket(e,n)})}addUintToInputSidePacket(e,t){m(this,t,n=>{this.h._addUintToInputSidePacket(e,n)})}addStringToInputSidePacket(e,t){m(this,t,n=>{m(this,e,i=>{this.h._addStringToInputSidePacket(i,n)})})}addProtoToInputSidePacket(e,t,n){m(this,n,i=>{m(this,t,r=>{const s=this.h._malloc(e.length);this.h.HEAPU8.set(e,s),this.h._addProtoToInputSidePacket(s,e.length,r,i),this.h._free(s)})})}addBoolVectorToInputSidePacket(e,t){m(this,t,n=>{const i=this.h._allocateBoolVector(e.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const r of e)this.h._addBoolVectorEntry(i,r);this.h._addBoolVectorToInputSidePacket(i,n)})}addDoubleVectorToInputSidePacket(e,t){m(this,t,n=>{const i=this.h._allocateDoubleVector(e.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const r of e)this.h._addDoubleVectorEntry(i,r);this.h._addDoubleVectorToInputSidePacket(i,n)})}addFloatVectorToInputSidePacket(e,t){m(this,t,n=>{const i=this.h._allocateFloatVector(e.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const r of e)this.h._addFloatVectorEntry(i,r);this.h._addFloatVectorToInputSidePacket(i,n)})}addIntVectorToInputSidePacket(e,t){m(this,t,n=>{const i=this.h._allocateIntVector(e.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const r of e)this.h._addIntVectorEntry(i,r);this.h._addIntVectorToInputSidePacket(i,n)})}addUintVectorToInputSidePacket(e,t){m(this,t,n=>{const i=this.h._allocateUintVector(e.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const r of e)this.h._addUintVectorEntry(i,r);this.h._addUintVectorToInputSidePacket(i,n)})}addStringVectorToInputSidePacket(e,t){m(this,t,n=>{const i=this.h._allocateStringVector(e.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const r of e)m(this,r,s=>{this.h._addStringVectorEntry(i,s)});this.h._addStringVectorToInputSidePacket(i,n)})}attachBoolListener(e,t){ke(this,e,t),m(this,e,n=>{this.h._attachBoolListener(n)})}attachBoolVectorListener(e,t){Oe(this,e,t),m(this,e,n=>{this.h._attachBoolVectorListener(n)})}attachIntListener(e,t){ke(this,e,t),m(this,e,n=>{this.h._attachIntListener(n)})}attachIntVectorListener(e,t){Oe(this,e,t),m(this,e,n=>{this.h._attachIntVectorListener(n)})}attachUintListener(e,t){ke(this,e,t),m(this,e,n=>{this.h._attachUintListener(n)})}attachUintVectorListener(e,t){Oe(this,e,t),m(this,e,n=>{this.h._attachUintVectorListener(n)})}attachDoubleListener(e,t){ke(this,e,t),m(this,e,n=>{this.h._attachDoubleListener(n)})}attachDoubleVectorListener(e,t){Oe(this,e,t),m(this,e,n=>{this.h._attachDoubleVectorListener(n)})}attachFloatListener(e,t){ke(this,e,t),m(this,e,n=>{this.h._attachFloatListener(n)})}attachFloatVectorListener(e,t){Oe(this,e,t),m(this,e,n=>{this.h._attachFloatVectorListener(n)})}attachStringListener(e,t){ke(this,e,t),m(this,e,n=>{this.h._attachStringListener(n)})}attachStringVectorListener(e,t){Oe(this,e,t),m(this,e,n=>{this.h._attachStringVectorListener(n)})}attachProtoListener(e,t,n){ke(this,e,t),m(this,e,i=>{this.h._attachProtoListener(i,n||!1)})}attachProtoVectorListener(e,t,n){Oe(this,e,t),m(this,e,i=>{this.h._attachProtoVectorListener(i,n||!1)})}attachAudioListener(e,t,n){this.h._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),ke(this,e,(i,r)=>{i=new Float32Array(i.buffer,i.byteOffset,i.length/4),t(i,r)}),m(this,e,i=>{this.h._attachAudioListener(i,n||!1)})}finishProcessing(){this.h._waitUntilIdle()}closeGraph(){this.h._closeGraph(),this.h.simpleListeners=void 0,this.h.emptyPacketListeners=void 0}},class extends xi{V(){this.h._registerModelResourcesGraphService()}});var xi;async function lo(e,t){const n=await(async(i,r,s)=>{var o=z;if(i&&await ki(i),!self.ModuleFactory||r&&(await ki(r),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&s&&((i=self.Module).locateFile=s.locateFile,s.mainScriptUrlOrBlob&&(i.mainScriptUrlOrBlob=s.mainScriptUrlOrBlob)),s=await self.ModuleFactory(self.Module||s),self.ModuleFactory=self.Module=void 0,new o(s,null)})(e.wasmLoaderPath,e.assetLoaderPath,{locateFile:i=>i.endsWith(".wasm")?e.wasmBinaryPath.toString():e.assetBinaryPath&&i.endsWith(".data")?e.assetBinaryPath.toString():i});return await n.J(t),n}async function ln(e,t){return lo(e,t)}function Ei(e){try{const t=e.D.length;if(t===1)throw Error(e.D[0].message);if(1<t)throw Error("Encountered multiple errors: "+e.D.map(n=>n.message).join(", "))}finally{e.D=[]}}function qe(e,t){e.B=Math.max(e.B,t)}var gn=class{constructor(e){this.i=e,this.D=[],this.B=0,this.i.setAutoRenderToScreen(!1)}setGraph(e,t){this.i.attachErrorListener((n,i)=>{this.D.push(Error(i))}),this.i.V(),this.i.setGraph(e,t),Ei(this)}finishProcessing(){this.i.finishProcessing(),Ei(this)}close(){this.i.closeGraph()}};gn.prototype.close=gn.prototype.close;var Rr=class extends N{constructor(e){super(e)}},co=[0,Re,B,pn,-1,St];function Si(e,t){Se(e,1,t)}var Pr=class extends N{constructor(){super()}};function uo(e,t,n,i){if(e.data!==void 0){var r=new Uint8Array(e.data.buffer,t,n);return i===1&&function(s,o,a){s.i.push([o,a]),s.i.sort((l,u)=>l[0]-u[0]),o=0;for(const[l,u]of s.i){const c=u;(a=l)<=o&&(o=Math.max(o,a+c))}o===s.length&&(s.data=void 0)}(e,t,n),r}}Pr.A=[4];class Mr{constructor(t){this.i=[],this.data=t,this.length=t.length}}var cn=class{constructor(e,t,n){this.i=e,this.j=t,this.l=n}get size(){let e=0;for(let t=0;t<this.i.length;t++)e+=this.i[t].length;return e}};function vi(e){if(e.i)try{e.h._free(e.j)}catch{}finally{e.i=!1}}var Ti=class{constructor(e,t){this.h=e,this.l=t,this.j=this.h._malloc(t)>>>0,this.o=this.h.HEAPU8,this.i=!!this.j}get offset(){if(!this.i)throw Error("WasmFileReference has been freed.");return this.j}get size(){if(!this.i)throw Error("WasmFileReference has been freed.");return this.l}set(e,t){this.o.set(e,this.j+(t??0))}},bn=class extends N{constructor(){super()}};bn.A=[4],bn.prototype.i=qt([0,X,2,K,B]);var ho=class extends N{constructor(){super()}},fo=[0,te,-5],po=[0,X,Zs,-1,Re],go=class extends N{constructor(){super()}},bo=[0,B,-6,1,B,1,[0,te,Re,-2],[0,te,pn],Re,-2,[0,te,-1,Re,pn,Ye],1,te],Br=class extends N{constructor(){super()}};Br.A=[5,7];var Nr=[0,[4,6],bo,B,1,Ks,K,Er,Sr],Ai=[0,J,po,Nr,B],mo=[0,B,te,-1],mn=class extends N{constructor(){super()}};mn.A=[29],mn.prototype.i=qt([0,X,8,fo,1,B,1,B,Ai,mo,1,Re,X,Nr,Ai,B,5,Re,Bt,1,co]);var _o=class extends N{constructor(){super()}},$r=class extends N{constructor(){super()}},_n=[2,4];$r.prototype.i=qt([0,_n,B,Er,B,de,[0,1,X]]);const wo=function(e){return class Cr extends e{static async W(n,i){let r;i||=await Cr.M();const s=[];for(const o of n?.requiredFeatures??[])i.features.has(o)?s.push(o):console.warn(`WebGPU feature ${o} is not supported.`);n={...n,requiredFeatures:s};try{r=await i.requestDevice(n)}catch(o){throw console.error("Unable to initialize WebGPU with the requested features."),o}return i=await i.requestAdapterInfo(),r.adapterInfo=i,r}static async M(n){if(!(n=await navigator.gpu.requestAdapter(n)))throw Error("Unable to request adapter from navigator.gpu; Ensure WebGPU is enabled.");return n}T(n){if(i)typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.id="canvas_webgpu");else var i=new OffscreenCanvas(1,1);i.getContext("webgpu").configure({device:n,format:navigator.gpu.getPreferredCanvasFormat()}),this.h.preinitializedWebGPUDevice=n}P(){return this.h.ccall("closeGraph","void",[],[],{async:!0})}}}(function(e){return class extends e{addStreamingReaderToInputSidePacket(t,n){this.h.addStreamingReaderToInputSidePacket((i,r,s)=>async function(o,a,l,u,c){if(c===2)return o.i=[],o.j=()=>Promise.resolve(void 0),o.l(),Promise.resolve(0);for(;o.size<l+u;){var f=await o.j();if(f===void 0)break;o.i.push(new Mr(f))}if(o.size<l+u)throw Error(`Data size is too small: ${o.size}, expected at least ${l+u}.`);f=a._malloc(u)>>>0;let h=0;for(let g=0;g<o.i.length;g++){const v=o.i[g];if(l>=v.length){l-=v.length;continue}const A=Math.min(u,v.length-l);if((l=uo(v,l,A,c))===void 0)throw Error("Data has already been released.");if(a.HEAPU8.set(l,f+h),l=0,h+=A,(u-=A)==0)break}if(u!==0)throw Error("Data not found.");return Promise.resolve(f)}(t,this.h,i,r,s),n)}}}(function(e){return class extends e{O(t,n){m(this,"lora_model_ref_in",i=>{this.h._addRawDataSpanToInputStream(t.offset,t.size,i,n)})}}}(class extends ao{})));class wn extends wo{}var Ii=class{constructor(e){this.j=e,this.i=Oi,Oi++}},Oi=0;class ko{constructor(){let t,n;this.promise=new Promise((i,r)=>{t=i,n=r}),this.i=t,this.j=n}}async function _t(){const e=await wn.M({powerPreference:"high-performance"});var t=e.limits.maxBufferSize;if(524550144>e.limits.maxStorageBufferBindingSize)throw Error(`The WebGPU device is unable to execute LLM tasks, because the required maxStorageBufferBindingSize is at least 524550144 but your device only supports maxStorageBufferBindingSize of ${t}`);if(786825216<=t)t=786825216;else{if(!(524550144<=t))throw Error(`The WebGPU device is unable to execute LLM tasks, because the required maxBufferSize is at least 524550144 but your device only supports maxBufferSize of ${t}`);t=524550144}return wn.W({requiredFeatures:["shader-f16"],requiredLimits:{maxStorageBufferBindingSize:524550144,maxBufferSize:t}},e)}function yo(e){const t=function(i){const r=new dn;w(r,10,"text_in"),w(r,10,"token_cost_in"),w(r,10,"lora_model_id_to_apply_in"),w(r,10,"lora_model_ref_in"),w(r,10,"lora_model_id_to_load_in"),w(r,16,"streaming_reader"),w(r,15,"text_out"),w(r,15,"text_end"),w(r,15,"token_cost_out");var s=new se;U(s,2,"TokenizerInputBuildCalculator"),w(s,3,"PROMPT:text_in"),w(s,3,"LORA_ID:lora_model_id_to_apply_in"),w(s,4,"prompt"),we(r,s),U(s=new se,2,"ModelDataCalculator"),w(s,6,"MODEL_DATA:__side_packet_1"),w(s,6,"MODEL_TYPE:model_type"),w(s,5,"READ_DATA_FN:streaming_reader"),w(s,3,"LORA_MODEL_SPAN:lora_model_ref_in"),w(s,3,"LORA_MODEL_ID:lora_model_id_to_load_in"),w(s,4,"LORA_DATA:lora_model_data"),we(r,s),U(s=new se,2,"Gpt2UnicodeMappingCalculator"),w(s,5,"MODEL_TYPE:model_type"),w(s,6,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),we(r,s),U(s=new De,1,"type.googleapis.com/odml.infra.proto.TokenizerCalculatorOptions");var o=new $r,a=fi(di(i.l))??0;re(o,1,a),U(a=new _o,2,"spm_vocab_model"),a==null&&(a=void 0);var l=o.m,u=H(l);Ge(u);for(var c=u,f=0,h=0;h<_n.length;h++){var g=_n[h];ct(l,c,g)!=null&&(f!==0&&(c=F(l,c,f)),f=g)}if((c=f)&&c!==4&&a!=null&&(u=F(l,u,c)),F(l,u,4,a),re(o,3,2),an(s,o.i()),U(o=new se,2,"TokenizerCalculator"),Qe(o,8,De,s),w(o,5,"MODEL_DATA:__side_packet_1"),w(o,3,"PROMPT_AND_INPUT_OPTIONS:prompt"),w(o,5,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),w(o,6,"PROCESSOR_GETTER:__input_side_1"),w(o,4,"IDS_AND_INPUT_OPTIONS:__stream_0"),we(r,o),U(s=new De,1,"type.googleapis.com/odml.infra.proto.LlmGpuCalculatorOptions"),re(o=new mn,12,3),U(o,1,"llm.tflite"),re(o,14,0),re(o,22,1),a=mr(i.l,Rr,3),Se(o,31,a),ee(a=new ho,1,!0,!1),ee(a,2,!0,!1),ee(a,5,!0,!1),Se(o,10,a),h=i.l,a=h.m,l=H(a),u=2&l?1:2,c=dr(a,l,4),f=G(c),pr(h,f,void 0)){for((4&f||Object.isFrozen(c))&&(c=be(c),f=Be(f,l),l=F(a,l,4,c)),g=h=0;h<c.length;h++){const v=lt(c[h]);v!=null&&(c[g++]=v)}g<h&&(c.length=g),f=D(f=gr(f,l),20,!0),f=D(f,4096,!1),f=D(f,8192,!1),R(c,f),2&f&&Object.freeze(c)}return et(f)||(h=f,(f=(g=u===1||u===4&&!!(32&f))?D(f,2,!0):je(f,l,!1))!==h&&R(c,f),g&&Object.freeze(c)),u===2&&et(f)&&(c=be(c),f=je(f=Be(f,l),l,!1),R(c,f),F(a,l,4,c)),br(o,29,c),a=new Br,re(l=new go,1,1),i=fi(di(i.l))??0,re(l,2,i),Se(a,1,l),Se(o,20,a),an(s,o.i()),U(i=new se,2,"LlmGpuCalculator"),Qe(i,8,De,s),w(i,3,"IDS_AND_INPUT_OPTIONS:__stream_0"),w(i,3,"FINISH:finish"),w(i,3,"LORA_DATA:lora_model_data"),w(i,5,"MODEL_DATA:__side_packet_1"),w(i,4,"DECODED_IDS:__stream_3"),w(i,4,"OUTPUT_END:__stream_4"),U(s=new _i,1,"FINISH"),ee(s,2,!0,!1),Qe(i,13,_i,s),we(r,i),U(i=new se,2,"IsPacketPresentCalculator"),w(i,3,"__stream_4"),w(i,4,"text_end"),we(r,i),U(i=new De,1,"type.googleapis.com/odml.infra.proto.DetokenizerCalculatorOptions"),re(s=new bn,5,1),w(s,4,"<eos>"),w(s,4,"<|endoftext|>"),an(i,s.i()),U(s=new se,2,"DetokenizerCalculator"),Qe(s,8,De,i),w(s,3,"IDS_AND_INPUT_OPTIONS:__stream_3"),w(s,5,"PROCESSOR_GETTER:__input_side_1"),w(s,5,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),w(s,5,"MODEL_DATA:__side_packet_1"),w(s,4,"FINISH_AND_INPUT_OPTIONS:finish"),w(s,4,"WORDS:text_out"),we(r,s),U(i=new se,2,"TokenCostCalculator"),w(i,3,"PROMPT:token_cost_in"),w(i,5,"PROCESSOR_GETTER:__input_side_1"),w(i,5,"BYTES_TO_UNICODE_MAPPING:tokenizer_mapping"),w(i,4,"NUM_TOKENS:token_cost_out"),we(r,i),r}(e);e.i.attachStringVectorListener("text_out",(i,r)=>{var s=e.G.length===0;i==null||i.length===0?s="":(i=(i=(i=i[0]).replaceAll("‚ñÅ"," ")).replaceAll("<0x0A>",`
`),s&&(i=i.trimStart()),s=i.split("\\[eod\\]",1)[0]),e.G.push(s),e.I&&e.C.length===0&&e.I(s,!1),qe(e,r)}),e.i.attachEmptyPacketListener("text_out",i=>{qe(e,i)}),e.i.attachBoolListener("text_end",(i,r)=>{e.j=!1,qe(e,r),kn(e),e.o&&(e.o.i(e.G.join("")),e.o=void 0),e.I&&e.I("",!0)}),e.i.attachEmptyPacketListener("text_end",i=>{e.j=!1,qe(e,i),kn(e),e.o&&(e.o.i(e.G.join("")),e.o=void 0)}),e.i.attachIntListener("token_cost_out",(i,r)=>{e.L=i,qe(e,r)}),e.H&&e.i.addStreamingReaderToInputSidePacket(e.H,"streaming_reader");const n=t.i();return e.u?.removeEventListener("uncapturederror",e.F),e.i.P().then(()=>{e.u?.addEventListener("uncapturederror",e.F),e.C.length=0,e.setGraph(new Uint8Array(n),!0),e.finishProcessing()})}function kn(e){if(0<e.C.length){const t=[...e.C];if(e.C.length=0,!e.o)throw t;e.o.j(t),e.o=void 0}}var z=class extends gn{constructor(e,t){if(super(new wn(e,t)),this.G=[],this.j=!1,this.C=[],this.F=n=>{const i=(n=n.error).message.match(/exceeds the max buffer size limit \(([0-9]+)\)\./);i&&524550144<Number(i[1])?n=Error(`Failed to run this LLM model, but you could try a smaller LLM model. WebGPU throws: "${n.message}"`):n.message.match(/is larger than the maximum binding size/)&&(n=Error(`Failed to run LLM inference, the supported max binding size is smaller than the required size. WebGPU throws: "${n.message}"`)),this.C.push(n)},this.l=new Pr,Si(this.l,new wi),this.s=new Rr,Se(this.l,3,this.s),Je(this.l,2,hi(512)),e=this.s,!Number.isFinite(2))throw st("enum");ee(e,1,2,0),re(this.s,2,1),ee(this.s,3,rn(1),0),ee(this.s,4,rn(1),0)}J(e){if(this.j)throw Error("Cannot set options while loading or processing.");let t;this.j=!0,e.baseOptions?.gpuOptions?.device&&(this.u&&this.u.removeEventListener("uncapturederror",this.F),this.u=e.baseOptions.gpuOptions.device,this.i.T(this.u),this.u.addEventListener("uncapturederror",this.F)),"maxTokens"in e&&Je(this.l,2,hi(e.maxTokens??512)),"topK"in e&&(re(this.s,2,e.topK??1),e.topK&&!e.randomSeed&&console.warn("'topK' option ignored; it requires randomSeed to be set.")),"temperature"in e&&(ee(this.s,4,rn(e.temperature??1),0),e.temperature&&!e.randomSeed&&console.warn("'temperature' option ignored; it requires randomSeed to be set.")),e.randomSeed&&Je(this.s,5,rr(e.randomSeed)),"loraRanks"in e&&function(i,r){br(i,4,r)}(this.l,e.loraRanks??[]);const n=new Promise(i=>{t=i});if(e.baseOptions?.modelAssetPath||e.baseOptions?.modelAssetBuffer){if(e.baseOptions.modelAssetPath&&e.baseOptions.modelAssetBuffer)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");let i=!1;e.baseOptions.modelAssetPath?this.H=function(r,s){const o=fetch(r.toString()).then(a=>a?.body?.getReader());return new cn([],async()=>{let a;try{a=await o}catch(c){throw Error(`Error loading model from "${r.toString()}": ${c}`)}const{value:l,done:u}=await a.read();if(!u)return l},s)}(e.baseOptions.modelAssetPath,t):e.baseOptions.modelAssetBuffer instanceof Uint8Array?(this.H=function(r,s){return new cn([new Mr(r)],()=>Promise.resolve(void 0),s)}(e.baseOptions.modelAssetBuffer,t),i=!0):e.baseOptions.modelAssetBuffer?(this.H=function(r,s){return new cn([],async()=>{const{value:o,done:a}=await r.read();if(!a)return o},s)}(e.baseOptions.modelAssetBuffer,t),i=!0):t(),i&&(e.baseOptions.modelAssetBuffer=void 0)}return e=yo(this).then(()=>{}),Promise.all([n,e]).then(()=>{this.j=!1,kn(this)})}get baseOptions(){return mr(this.l,wi,1)}set baseOptions(e){Si(this.l,e)}S(e,t,n){if(this.j)throw Error("Previous invocation or loading is still ongoing.");if(this.I=typeof t=="function"?t:n,this.G.length=0,this.j=!0,n=this.B+1,this.i.addStringToStream(e,"text_in",n),t instanceof Ii){if(t.j!==this)throw this.j=!1,Error("The LoRA model was not loaded by this LLM Inference task.");this.i.addUintToStream(t.i,"lora_model_id_to_apply_in",n)}else this.i.addEmptyPacketToStream("lora_model_id_to_apply_in",n);return this.finishProcessing(),this.o=new ko,this.o.promise}X(e){if(this.j)throw Error("Previous invocation or loading is still ongoing.");return this.j=!0,this.L=void 0,this.i.addStringToStream(e,"token_cost_in",this.B+1),this.finishProcessing(),this.j=!1,this.L}async U(e){if(this.j)throw Error("Cannot load LoRA model while loading or processing.");if(this.j=!0,e instanceof Uint8Array){var t=new Ti(this.i.h,e.length);t.set(e),e=t}else e=await async function(n,i){var r=await fetch(i.toString());i=Number(r.headers.get("content-length")),n=new Ti(n,i);let s=0;for(r=r?.body?.getReader();;){const{value:o,done:a}=await r.read();if(a)break;n.set(o,s),s+=o.byteLength}if(i!==s)throw vi(n),Error(`File could not be fully loaded to memory, so was not retained. Loaded ${s}/${i} bytes before failure`);return n}(this.i.h,e);return t=new Ii(this),this.i.O(e,this.B+1),this.i.addUintToStream(t.i,"lora_model_id_to_load_in",this.B+1),this.finishProcessing(),vi(e),this.j=!1,t}close(){this.u?.removeEventListener("uncapturederror",this.F),super.close()}};z.prototype.loadLoraModel=z.prototype.U,z.prototype.sizeInTokens=z.prototype.X,z.prototype.generateResponse=z.prototype.S,z.prototype.setOptions=z.prototype.J,z.createWebGpuDevice=_t,z.createFromModelPath=async function(e,t){return ln(e,t={baseOptions:{gpuOptions:{device:await _t()},modelAssetPath:t}})},z.createFromModelBuffer=async function(e,t){return ln(e,t={baseOptions:{gpuOptions:{device:await _t()},modelAssetBuffer:t}})},z.createFromOptions=async function(e,t){if(!t.baseOptions?.gpuOptions?.device){const n=await _t();t.baseOptions=t.baseOptions??{},t.baseOptions.gpuOptions=t?.baseOptions?.gpuOptions??{},t.baseOptions.gpuOptions.device=n}return ln(e,t)};function xo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dr(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],i=typeof n;(i==="object"||i==="function")&&!Object.isFrozen(n)&&Dr(n)}),e}class Li{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Ur(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function ve(e,...t){const n=Object.create(null);for(const i in e)n[i]=e[i];return t.forEach(function(i){for(const r in i)n[r]=i[r]}),n}const Eo="</span>",Ri=e=>!!e.scope,So=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((i,r)=>`${i}${"_".repeat(r+1)}`)].join(" ")}return`${t}${e}`};class vo{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=Ur(t)}openNode(t){if(!Ri(t))return;const n=So(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){Ri(t)&&(this.buffer+=Eo)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const Pi=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class Mn{constructor(){this.rootNode=Pi(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=Pi({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(i=>this._walk(t,i)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{Mn._collapse(n)}))}}class To extends Mn{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const i=t.root;n&&(i.scope=`language:${n}`),this.add(i)}toHTML(){return new vo(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function ot(e){return e?typeof e=="string"?e:e.source:null}function zr(e){return $e("(?=",e,")")}function Ao(e){return $e("(?:",e,")*")}function Io(e){return $e("(?:",e,")?")}function $e(...e){return e.map(n=>ot(n)).join("")}function Oo(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Bn(...e){return"("+(Oo(e).capture?"":"?:")+e.map(i=>ot(i)).join("|")+")"}function jr(e){return new RegExp(e.toString()+"|").exec("").length-1}function Lo(e,t){const n=e&&e.exec(t);return n&&n.index===0}const Ro=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Nn(e,{joinWith:t}){let n=0;return e.map(i=>{n+=1;const r=n;let s=ot(i),o="";for(;s.length>0;){const a=Ro.exec(s);if(!a){o+=s;break}o+=s.substring(0,a.index),s=s.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?o+="\\"+String(Number(a[1])+r):(o+=a[0],a[0]==="("&&n++)}return o}).map(i=>`(${i})`).join(t)}const Po=/\b\B/,Fr="[a-zA-Z]\\w*",$n="[a-zA-Z_]\\w*",Gr="\\b\\d+(\\.\\d+)?",Hr="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Vr="\\b(0b[01]+)",Mo="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Bo=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=$e(t,/.*\b/,e.binary,/\b.*/)),ve({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,i)=>{n.index!==0&&i.ignoreMatch()}},e)},at={begin:"\\\\[\\s\\S]",relevance:0},No={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[at]},$o={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[at]},Co={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Zt=function(e,t,n={}){const i=ve({scope:"comment",begin:e,end:t,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=Bn("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:$e(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},Do=Zt("//","$"),Uo=Zt("/\\*","\\*/"),zo=Zt("#","$"),jo={scope:"number",begin:Gr,relevance:0},Fo={scope:"number",begin:Hr,relevance:0},Go={scope:"number",begin:Vr,relevance:0},Ho={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[at,{begin:/\[/,end:/\]/,relevance:0,contains:[at]}]},Vo={scope:"title",begin:Fr,relevance:0},Wo={scope:"title",begin:$n,relevance:0},qo={begin:"\\.\\s*"+$n,relevance:0},Zo=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var wt=Object.freeze({__proto__:null,APOS_STRING_MODE:No,BACKSLASH_ESCAPE:at,BINARY_NUMBER_MODE:Go,BINARY_NUMBER_RE:Vr,COMMENT:Zt,C_BLOCK_COMMENT_MODE:Uo,C_LINE_COMMENT_MODE:Do,C_NUMBER_MODE:Fo,C_NUMBER_RE:Hr,END_SAME_AS_BEGIN:Zo,HASH_COMMENT_MODE:zo,IDENT_RE:Fr,MATCH_NOTHING_RE:Po,METHOD_GUARD:qo,NUMBER_MODE:jo,NUMBER_RE:Gr,PHRASAL_WORDS_MODE:Co,QUOTE_STRING_MODE:$o,REGEXP_MODE:Ho,RE_STARTERS_RE:Mo,SHEBANG:Bo,TITLE_MODE:Vo,UNDERSCORE_IDENT_RE:$n,UNDERSCORE_TITLE_MODE:Wo});function Ko(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function Xo(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function Qo(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=Ko,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function Yo(e,t){Array.isArray(e.illegal)&&(e.illegal=Bn(...e.illegal))}function Jo(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function ea(e,t){e.relevance===void 0&&(e.relevance=1)}const ta=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(i=>{delete e[i]}),e.keywords=n.keywords,e.begin=$e(n.beforeMatch,zr(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},na=["of","and","for","in","not","or","if","then","parent","list","value"],ia="keyword";function Wr(e,t,n=ia){const i=Object.create(null);return typeof e=="string"?r(n,e.split(" ")):Array.isArray(e)?r(n,e):Object.keys(e).forEach(function(s){Object.assign(i,Wr(e[s],t,s))}),i;function r(s,o){t&&(o=o.map(a=>a.toLowerCase())),o.forEach(function(a){const l=a.split("|");i[l[0]]=[s,ra(l[0],l[1])]})}}function ra(e,t){return t?Number(t):sa(e)?0:1}function sa(e){return na.includes(e.toLowerCase())}const Mi={},Pe=e=>{console.error(e)},Bi=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Ue=(e,t)=>{Mi[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Mi[`${e}/${t}`]=!0)},Nt=new Error;function qr(e,t,{key:n}){let i=0;const r=e[n],s={},o={};for(let a=1;a<=t.length;a++)o[a+i]=r[a],s[a+i]=!0,i+=jr(t[a-1]);e[n]=o,e[n]._emit=s,e[n]._multi=!0}function oa(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Pe("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Nt;if(typeof e.beginScope!="object"||e.beginScope===null)throw Pe("beginScope must be object"),Nt;qr(e,e.begin,{key:"beginScope"}),e.begin=Nn(e.begin,{joinWith:""})}}function aa(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Pe("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Nt;if(typeof e.endScope!="object"||e.endScope===null)throw Pe("endScope must be object"),Nt;qr(e,e.end,{key:"endScope"}),e.end=Nn(e.end,{joinWith:""})}}function la(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function ca(e){la(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),oa(e),aa(e)}function ua(e){function t(o,a){return new RegExp(ot(o),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(a?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=jr(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=t(Nn(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const u=l.findIndex((f,h)=>h>0&&f!==void 0),c=this.matchIndexes[u];return l.splice(0,u),Object.assign(l,c)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new n;return this.rules.slice(a).forEach(([u,c])=>l.addRule(u,c)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let u=l.exec(a);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,u=c.exec(a)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function r(o){const a=new i;return o.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),o.terminatorEnd&&a.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&a.addRule(o.illegal,{type:"illegal"}),a}function s(o,a){const l=o;if(o.isCompiled)return l;[Xo,Jo,ca,ta].forEach(c=>c(o,a)),e.compilerExtensions.forEach(c=>c(o,a)),o.__beforeBegin=null,[Qo,Yo,ea].forEach(c=>c(o,a)),o.isCompiled=!0;let u=null;return typeof o.keywords=="object"&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),u=o.keywords.$pattern,delete o.keywords.$pattern),u=u||/\w+/,o.keywords&&(o.keywords=Wr(o.keywords,e.case_insensitive)),l.keywordPatternRe=t(u,!0),a&&(o.begin||(o.begin=/\B|\b/),l.beginRe=t(l.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(l.endRe=t(l.end)),l.terminatorEnd=ot(l.end)||"",o.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(o.end?"|":"")+a.terminatorEnd)),o.illegal&&(l.illegalRe=t(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(c){return ha(c==="self"?o:c)})),o.contains.forEach(function(c){s(c,l)}),o.starts&&s(o.starts,a),l.matcher=r(l),l}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=ve(e.classNameAliases||{}),s(e)}function Zr(e){return e?e.endsWithParent||Zr(e.starts):!1}function ha(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return ve(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:Zr(e)?ve(e,{starts:e.starts?ve(e.starts):null}):Object.isFrozen(e)?ve(e):e}var fa="11.9.0";class pa extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const un=Ur,Ni=ve,$i=Symbol("nomatch"),da=7,Kr=function(e){const t=Object.create(null),n=Object.create(null),i=[];let r=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:To};function l(p){return a.noHighlightRe.test(p)}function u(p){let _=p.className+" ";_+=p.parentNode?p.parentNode.className:"";const x=a.languageDetectRe.exec(_);if(x){const I=me(x[1]);return I||(Bi(s.replace("{}",x[1])),Bi("Falling back to no-highlight mode for this block.",p)),I?x[1]:"no-highlight"}return _.split(/\s+/).find(I=>l(I)||me(I))}function c(p,_,x){let I="",P="";typeof _=="object"?(I=p,x=_.ignoreIllegals,P=_.language):(Ue("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ue("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),P=p,I=_),x===void 0&&(x=!0);const Y={code:I,language:P};pt("before:highlight",Y);const _e=Y.result?Y.result:f(Y.language,Y.code,x);return _e.code=Y.code,pt("after:highlight",_e),_e}function f(p,_,x,I){const P=Object.create(null);function Y(d,b){return d.keywords[b]}function _e(){if(!k.keywords){$.addText(O);return}let d=0;k.keywordPatternRe.lastIndex=0;let b=k.keywordPatternRe.exec(O),y="";for(;b;){y+=O.substring(d,b.index);const E=ie.case_insensitive?b[0].toLowerCase():b[0],C=Y(k,E);if(C){const[fe,ws]=C;if($.addText(y),y="",P[E]=(P[E]||0)+1,P[E]<=da&&(bt+=ws),fe.startsWith("_"))y+=b[0];else{const ks=ie.classNameAliases[fe]||fe;ne(b[0],ks)}}else y+=b[0];d=k.keywordPatternRe.lastIndex,b=k.keywordPatternRe.exec(O)}y+=O.substring(d),$.addText(y)}function dt(){if(O==="")return;let d=null;if(typeof k.subLanguage=="string"){if(!t[k.subLanguage]){$.addText(O);return}d=f(k.subLanguage,O,!0,Xn[k.subLanguage]),Xn[k.subLanguage]=d._top}else d=g(O,k.subLanguage.length?k.subLanguage:null);k.relevance>0&&(bt+=d.relevance),$.__addSublanguage(d._emitter,d.language)}function q(){k.subLanguage!=null?dt():_e(),O=""}function ne(d,b){d!==""&&($.startScope(b),$.addText(d),$.endScope())}function Wn(d,b){let y=1;const E=b.length-1;for(;y<=E;){if(!d._emit[y]){y++;continue}const C=ie.classNameAliases[d[y]]||d[y],fe=b[y];C?ne(fe,C):(O=fe,_e(),O=""),y++}}function qn(d,b){return d.scope&&typeof d.scope=="string"&&$.openNode(ie.classNameAliases[d.scope]||d.scope),d.beginScope&&(d.beginScope._wrap?(ne(O,ie.classNameAliases[d.beginScope._wrap]||d.beginScope._wrap),O=""):d.beginScope._multi&&(Wn(d.beginScope,b),O="")),k=Object.create(d,{parent:{value:k}}),k}function Zn(d,b,y){let E=Lo(d.endRe,y);if(E){if(d["on:end"]){const C=new Li(d);d["on:end"](b,C),C.isMatchIgnored&&(E=!1)}if(E){for(;d.endsParent&&d.parent;)d=d.parent;return d}}if(d.endsWithParent)return Zn(d.parent,b,y)}function ds(d){return k.matcher.regexIndex===0?(O+=d[0],1):(Yt=!0,0)}function gs(d){const b=d[0],y=d.rule,E=new Li(y),C=[y.__beforeBegin,y["on:begin"]];for(const fe of C)if(fe&&(fe(d,E),E.isMatchIgnored))return ds(b);return y.skip?O+=b:(y.excludeBegin&&(O+=b),q(),!y.returnBegin&&!y.excludeBegin&&(O=b)),qn(y,d),y.returnBegin?0:b.length}function bs(d){const b=d[0],y=_.substring(d.index),E=Zn(k,d,y);if(!E)return $i;const C=k;k.endScope&&k.endScope._wrap?(q(),ne(b,k.endScope._wrap)):k.endScope&&k.endScope._multi?(q(),Wn(k.endScope,d)):C.skip?O+=b:(C.returnEnd||C.excludeEnd||(O+=b),q(),C.excludeEnd&&(O=b));do k.scope&&$.closeNode(),!k.skip&&!k.subLanguage&&(bt+=k.relevance),k=k.parent;while(k!==E.parent);return E.starts&&qn(E.starts,d),C.returnEnd?0:b.length}function ms(){const d=[];for(let b=k;b!==ie;b=b.parent)b.scope&&d.unshift(b.scope);d.forEach(b=>$.openNode(b))}let gt={};function Kn(d,b){const y=b&&b[0];if(O+=d,y==null)return q(),0;if(gt.type==="begin"&&b.type==="end"&&gt.index===b.index&&y===""){if(O+=_.slice(b.index,b.index+1),!r){const E=new Error(`0 width match regex (${p})`);throw E.languageName=p,E.badRule=gt.rule,E}return 1}if(gt=b,b.type==="begin")return gs(b);if(b.type==="illegal"&&!x){const E=new Error('Illegal lexeme "'+y+'" for mode "'+(k.scope||"<unnamed>")+'"');throw E.mode=k,E}else if(b.type==="end"){const E=bs(b);if(E!==$i)return E}if(b.type==="illegal"&&y==="")return 1;if(Qt>1e5&&Qt>b.index*3)throw new Error("potential infinite loop, way more iterations than matches");return O+=y,y.length}const ie=me(p);if(!ie)throw Pe(s.replace("{}",p)),new Error('Unknown language: "'+p+'"');const _s=ua(ie);let Xt="",k=I||_s;const Xn={},$=new a.__emitter(a);ms();let O="",bt=0,Ie=0,Qt=0,Yt=!1;try{if(ie.__emitTokens)ie.__emitTokens(_,$);else{for(k.matcher.considerAll();;){Qt++,Yt?Yt=!1:k.matcher.considerAll(),k.matcher.lastIndex=Ie;const d=k.matcher.exec(_);if(!d)break;const b=_.substring(Ie,d.index),y=Kn(b,d);Ie=d.index+y}Kn(_.substring(Ie))}return $.finalize(),Xt=$.toHTML(),{language:p,value:Xt,relevance:bt,illegal:!1,_emitter:$,_top:k}}catch(d){if(d.message&&d.message.includes("Illegal"))return{language:p,value:un(_),illegal:!0,relevance:0,_illegalBy:{message:d.message,index:Ie,context:_.slice(Ie-100,Ie+100),mode:d.mode,resultSoFar:Xt},_emitter:$};if(r)return{language:p,value:un(_),illegal:!1,relevance:0,errorRaised:d,_emitter:$,_top:k};throw d}}function h(p){const _={value:un(p),illegal:!1,relevance:0,_top:o,_emitter:new a.__emitter(a)};return _._emitter.addText(p),_}function g(p,_){_=_||a.languages||Object.keys(t);const x=h(p),I=_.filter(me).filter(Vn).map(q=>f(q,p,!1));I.unshift(x);const P=I.sort((q,ne)=>{if(q.relevance!==ne.relevance)return ne.relevance-q.relevance;if(q.language&&ne.language){if(me(q.language).supersetOf===ne.language)return 1;if(me(ne.language).supersetOf===q.language)return-1}return 0}),[Y,_e]=P,dt=Y;return dt.secondBest=_e,dt}function v(p,_,x){const I=_&&n[_]||x;p.classList.add("hljs"),p.classList.add(`language-${I}`)}function A(p){let _=null;const x=u(p);if(l(x))return;if(pt("before:highlightElement",{el:p,language:x}),p.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",p);return}if(p.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(p)),a.throwUnescapedHTML))throw new pa("One of your code blocks includes unescaped HTML.",p.innerHTML);_=p;const I=_.textContent,P=x?c(I,{language:x,ignoreIllegals:!0}):g(I);p.innerHTML=P.value,p.dataset.highlighted="yes",v(p,x,P.language),p.result={language:P.language,re:P.relevance,relevance:P.relevance},P.secondBest&&(p.secondBest={language:P.secondBest.language,relevance:P.secondBest.relevance}),pt("after:highlightElement",{el:p,result:P,text:I})}function W(p){a=Ni(a,p)}const he=()=>{Ae(),Ue("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Te(){Ae(),Ue("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let He=!1;function Ae(){if(document.readyState==="loading"){He=!0;return}document.querySelectorAll(a.cssSelector).forEach(A)}function Ve(){He&&Ae()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",Ve,!1);function as(p,_){let x=null;try{x=_(e)}catch(I){if(Pe("Language definition for '{}' could not be registered.".replace("{}",p)),r)Pe(I);else throw I;x=o}x.name||(x.name=p),t[p]=x,x.rawDefinition=_.bind(null,e),x.aliases&&Hn(x.aliases,{languageName:p})}function ls(p){delete t[p];for(const _ of Object.keys(n))n[_]===p&&delete n[_]}function cs(){return Object.keys(t)}function me(p){return p=(p||"").toLowerCase(),t[p]||t[n[p]]}function Hn(p,{languageName:_}){typeof p=="string"&&(p=[p]),p.forEach(x=>{n[x.toLowerCase()]=_})}function Vn(p){const _=me(p);return _&&!_.disableAutodetect}function us(p){p["before:highlightBlock"]&&!p["before:highlightElement"]&&(p["before:highlightElement"]=_=>{p["before:highlightBlock"](Object.assign({block:_.el},_))}),p["after:highlightBlock"]&&!p["after:highlightElement"]&&(p["after:highlightElement"]=_=>{p["after:highlightBlock"](Object.assign({block:_.el},_))})}function hs(p){us(p),i.push(p)}function fs(p){const _=i.indexOf(p);_!==-1&&i.splice(_,1)}function pt(p,_){const x=p;i.forEach(function(I){I[x]&&I[x](_)})}function ps(p){return Ue("10.7.0","highlightBlock will be removed entirely in v12.0"),Ue("10.7.0","Please use highlightElement now."),A(p)}Object.assign(e,{highlight:c,highlightAuto:g,highlightAll:Ae,highlightElement:A,highlightBlock:ps,configure:W,initHighlighting:he,initHighlightingOnLoad:Te,registerLanguage:as,unregisterLanguage:ls,listLanguages:cs,getLanguage:me,registerAliases:Hn,autoDetection:Vn,inherit:Ni,addPlugin:hs,removePlugin:fs}),e.debugMode=function(){r=!1},e.safeMode=function(){r=!0},e.versionString=fa,e.regex={concat:$e,lookahead:zr,either:Bn,optional:Io,anyNumberOfTimes:Ao};for(const p in wt)typeof wt[p]=="object"&&Dr(wt[p]);return Object.assign(e,wt),e},Fe=Kr({});Fe.newInstance=()=>Kr({});var ga=Fe;Fe.HighlightJS=Fe;Fe.default=Fe;const yn=xo(ga);function Cn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ce=Cn();function Xr(e){Ce=e}const Qr=/[&<>"']/,ba=new RegExp(Qr.source,"g"),Yr=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ma=new RegExp(Yr.source,"g"),_a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ci=e=>_a[e];function Z(e,t){if(t){if(Qr.test(e))return e.replace(ba,Ci)}else if(Yr.test(e))return e.replace(ma,Ci);return e}const wa=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function ka(e){return e.replace(wa,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const ya=/(^|[^\[])\^/g;function T(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const i={replace:(r,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(ya,"$1"),n=n.replace(r,o),i},getRegex:()=>new RegExp(n,t)};return i}function Di(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const tt={exec:()=>null};function Ui(e,t){const n=e.replace(/\|/g,(s,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),i=n.split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function kt(e,t,n){const i=e.length;if(i===0)return"";let r=0;for(;r<i;){const s=e.charAt(i-r-1);if(s===t&&!n)r++;else if(s!==t&&n)r++;else break}return e.slice(0,i-r)}function xa(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return-1}function zi(e,t,n,i){const r=t.href,s=t.title?Z(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:s,text:Z(o)}}function Ea(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const i=n[1];return t.split(`
`).map(r=>{const s=r.match(/^\s+/);if(s===null)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join(`
`)}class $t{options;rules;lexer;constructor(t){this.options=t||Ce}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:kt(i,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const i=n[0],r=Ea(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=kt(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const i=kt(n[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(t){let n=this.rules.block.list.exec(t);if(n){let i=n[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",u=!1;for(;t;){let c=!1;if(!(n=o.exec(t))||this.rules.block.hr.test(t))break;a=n[0],t=t.substring(a.length);let f=n[2].split(`
`,1)[0].replace(/^\t+/,he=>" ".repeat(3*he.length)),h=t.split(`
`,1)[0],g=0;this.options.pedantic?(g=2,l=f.trimStart()):(g=n[2].search(/[^ ]/),g=g>4?1:g,l=f.slice(g),g+=n[1].length);let v=!1;if(!f&&/^ *$/.test(h)&&(a+=h+`
`,t=t.substring(h.length+1),c=!0),!c){const he=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Te=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),He=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),Ae=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;t;){const Ve=t.split(`
`,1)[0];if(h=Ve,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),He.test(h)||Ae.test(h)||he.test(h)||Te.test(t))break;if(h.search(/[^ ]/)>=g||!h.trim())l+=`
`+h.slice(g);else{if(v||f.search(/[^ ]/)>=4||He.test(f)||Ae.test(f)||Te.test(f))break;l+=`
`+h}!v&&!h.trim()&&(v=!0),a+=Ve+`
`,t=t.substring(Ve.length+1),f=h.slice(g)}}s.loose||(u?s.loose=!0:/\n *\n *$/.test(a)&&(u=!0));let A=null,W;this.options.gfm&&(A=/^\[[ xX]\] /.exec(l),A&&(W=A[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!A,checked:W,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){const f=s.items[c].tokens.filter(g=>g.type==="space"),h=f.length>0&&f.some(g=>/\n.*\n/.test(g.raw));s.loose=h}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const i=Ui(n[1]),r=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const a of r)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(const a of i)o.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of s)o.rows.push(Ui(a,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const i=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:Z(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=kt(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=xa(n[2],"()");if(o>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),zi(n,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=n[r.toLowerCase()];if(!s){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return zi(i,s,i[0],this.lexer)}}emStrong(t,n,i=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const o=[...r[0]].length-1;let a,l,u=o,c=0;const f=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*t.length+o);(r=f.exec(n))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=[...a].length,r[3]||r[4]){u+=l;continue}else if((r[5]||r[6])&&o%3&&!((o+l)%3)){c+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+c);const h=[...r[0]][0].length,g=t.slice(0,o+r.index+h+l);if(Math.min(o,l)%2){const A=g.slice(1,-1);return{type:"em",raw:g,text:A,tokens:this.lexer.inlineTokens(A)}}const v=g.slice(2,-2);return{type:"strong",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Z(i,!0),{type:"codespan",raw:n[0],text:i}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let i,r;return n[2]==="@"?(i=Z(n[1]),r="mailto:"+i):(i=Z(n[1]),r=i),{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(t){let n;if(n=this.rules.inline.url.exec(t)){let i,r;if(n[2]==="@")i=Z(n[0]),r="mailto:"+i;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(s!==n[0]);i=Z(n[0]),n[1]==="www."?r="http://"+n[0]:r=n[0]}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let i;return this.lexer.state.inRawBlock?i=n[0]:i=Z(n[0]),{type:"text",raw:n[0],text:i}}}}const Sa=/^(?: *(?:\n|$))+/,va=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Ta=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ht=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Aa=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Jr=/(?:[*+-]|\d{1,9}[.)])/,es=T(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Jr).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Dn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ia=/^[^\n]+/,Un=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Oa=T(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Un).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),La=T(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Jr).getRegex(),Kt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",zn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ra=T("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",zn).replace("tag",Kt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ts=T(Dn).replace("hr",ht).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kt).getRegex(),Pa=T(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ts).getRegex(),jn={blockquote:Pa,code:va,def:Oa,fences:Ta,heading:Aa,hr:ht,html:Ra,lheading:es,list:La,newline:Sa,paragraph:ts,table:tt,text:Ia},ji=T("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ht).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kt).getRegex(),Ma={...jn,table:ji,paragraph:T(Dn).replace("hr",ht).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ji).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kt).getRegex()},Ba={...jn,html:T(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",zn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:tt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:T(Dn).replace("hr",ht).replace("heading",` *#{1,6} *[^
]`).replace("lheading",es).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ns=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Na=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,is=/^( {2,}|\\)\n(?!\s*$)/,$a=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ft="\\p{P}\\p{S}",Ca=T(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ft).getRegex(),Da=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Ua=T(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ft).getRegex(),za=T("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ft).getRegex(),ja=T("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ft).getRegex(),Fa=T(/\\([punct])/,"gu").replace(/punct/g,ft).getRegex(),Ga=T(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ha=T(zn).replace("(?:-->|$)","-->").getRegex(),Va=T("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ha).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ct=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Wa=T(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ct).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),rs=T(/^!?\[(label)\]\[(ref)\]/).replace("label",Ct).replace("ref",Un).getRegex(),ss=T(/^!?\[(ref)\](?:\[\])?/).replace("ref",Un).getRegex(),qa=T("reflink|nolink(?!\\()","g").replace("reflink",rs).replace("nolink",ss).getRegex(),Fn={_backpedal:tt,anyPunctuation:Fa,autolink:Ga,blockSkip:Da,br:is,code:Na,del:tt,emStrongLDelim:Ua,emStrongRDelimAst:za,emStrongRDelimUnd:ja,escape:ns,link:Wa,nolink:ss,punctuation:Ca,reflink:rs,reflinkSearch:qa,tag:Va,text:$a,url:tt},Za={...Fn,link:T(/^!?\[(label)\]\((.*?)\)/).replace("label",Ct).getRegex(),reflink:T(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ct).getRegex()},xn={...Fn,escape:T(ns).replace("])","~|])").getRegex(),url:T(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ka={...xn,br:T(is).replace("{2,}","*").getRegex(),text:T(xn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},yt={normal:jn,gfm:Ma,pedantic:Ba},Ze={normal:Fn,gfm:xn,breaks:Ka,pedantic:Za};class oe{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ce,this.options.tokenizer=this.options.tokenizer||new $t,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:yt.normal,inline:Ze.normal};this.options.pedantic?(n.block=yt.pedantic,n.inline=Ze.pedantic):this.options.gfm&&(n.block=yt.gfm,this.options.breaks?n.inline=Ze.breaks:n.inline=Ze.gfm),this.tokenizer.rules=n}static get rules(){return{block:yt,inline:Ze}}static lex(t,n){return new oe(n).lex(t)}static lexInline(t,n){return new oe(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,l,u)=>l+"    ".repeat(u.length));let i,r,s,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length),i.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(s=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(c=>{u=c.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(s=t.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i,r,s,o=t,a,l,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(i=c.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),r=n[n.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(t,o,u)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),n.push(i);continue}if(s=t,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const f=t.slice(1);let h;this.options.extensions.startInline.forEach(g=>{h=g.call({lexer:this},f),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(s=t.substring(0,c+1))}if(i=this.tokenizer.inlineText(s)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(u=i.raw.slice(-1)),l=!0,r=n[n.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}}class Dt{options;constructor(t){this.options=t||Ce}code(t,n,i){const r=(n||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+Z(r)+'">'+(i?t:Z(t,!0))+`</code></pre>
`:"<pre><code>"+(i?t:Z(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,i){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,i){const r=n?"ol":"ul",s=n&&i!==1?' start="'+i+'"':"";return"<"+r+s+`>
`+t+"</"+r+`>
`}listitem(t,n,i){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+t+`</${i}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,i){const r=Di(t);if(r===null)return i;t=r;let s='<a href="'+t+'"';return n&&(s+=' title="'+n+'"'),s+=">"+i+"</a>",s}image(t,n,i){const r=Di(t);if(r===null)return i;t=r;let s=`<img src="${t}" alt="${i}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(t){return t}}class Gn{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,i){return""+i}image(t,n,i){return""+i}br(){return""}}class ae{options;renderer;textRenderer;constructor(t){this.options=t||Ce,this.options.renderer=this.options.renderer||new Dt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Gn}static parse(t,n){return new ae(n).parse(t)}static parseInline(t,n){return new ae(n).parseInline(t)}parse(t,n=!0){let i="";for(let r=0;r<t.length;r++){const s=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{const o=s;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,ka(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=s;i+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=s;let a="",l="";for(let c=0;c<o.header.length;c++)l+=this.renderer.tablecell(this.parseInline(o.header[c].tokens),{header:!0,align:o.align[c]});a+=this.renderer.tablerow(l);let u="";for(let c=0;c<o.rows.length;c++){const f=o.rows[c];l="";for(let h=0;h<f.length;h++)l+=this.renderer.tablecell(this.parseInline(f[h].tokens),{header:!1,align:o.align[h]});u+=this.renderer.tablerow(l)}i+=this.renderer.table(a,u);continue}case"blockquote":{const o=s,a=this.parse(o.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,l=o.start,u=o.loose;let c="";for(let f=0;f<o.items.length;f++){const h=o.items[f],g=h.checked,v=h.task;let A="";if(h.task){const W=this.renderer.checkbox(!!g);u?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=W+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=W+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:W+" "}):A+=W+" "}A+=this.parse(h.tokens,u),c+=this.renderer.listitem(A,v,!!g)}i+=this.renderer.list(c,a,l);continue}case"html":{const o=s;i+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=s;i+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<t.length&&t[r+1].type==="text";)o=t[++r],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);i+=n?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(t,n){n=n||this.renderer;let i="";for(let r=0;r<t.length;r++){const s=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}switch(s.type){case"escape":{const o=s;i+=n.text(o.text);break}case"html":{const o=s;i+=n.html(o.text);break}case"link":{const o=s;i+=n.link(o.href,o.title,this.parseInline(o.tokens,n));break}case"image":{const o=s;i+=n.image(o.href,o.title,o.text);break}case"strong":{const o=s;i+=n.strong(this.parseInline(o.tokens,n));break}case"em":{const o=s;i+=n.em(this.parseInline(o.tokens,n));break}case"codespan":{const o=s;i+=n.codespan(o.text);break}case"br":{i+=n.br();break}case"del":{const o=s;i+=n.del(this.parseInline(o.tokens,n));break}case"text":{const o=s;i+=n.text(o.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class vt{options;constructor(t){this.options=t||Ce}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class Xa{defaults=Cn();options=this.setOptions;parse=this.#e(oe.lex,ae.parse);parseInline=this.#e(oe.lexInline,ae.parseInline);Parser=ae;Renderer=Dt;TextRenderer=Gn;Lexer=oe;Tokenizer=$t;Hooks=vt;constructor(...t){this.use(...t)}walkTokens(t,n){let i=[];for(const r of t)switch(i=i.concat(n.call(this,r)),r.type){case"table":{const s=r;for(const o of s.header)i=i.concat(this.walkTokens(o.tokens,n));for(const o of s.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,n));break}case"list":{const s=r;i=i.concat(this.walkTokens(s.items,n));break}default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{const a=s[o].flat(1/0);i=i.concat(this.walkTokens(a,n))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,n)))}}return i}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=n.renderers[s.name];o?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),r.extensions=n),i.renderer){const s=this.defaults.renderer||new Dt(this.defaults);for(const o in i.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const a=o,l=i.renderer[a],u=s[a];s[a]=(...c)=>{let f=l.apply(s,c);return f===!1&&(f=u.apply(s,c)),f||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new $t(this.defaults);for(const o in i.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=i.tokenizer[a],u=s[a];s[a]=(...c)=>{let f=l.apply(s,c);return f===!1&&(f=u.apply(s,c)),f}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new vt;for(const o in i.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=i.hooks[a],u=s[a];vt.passThroughHooks.has(o)?s[a]=c=>{if(this.defaults.async)return Promise.resolve(l.call(s,c)).then(h=>u.call(s,h));const f=l.call(s,c);return u.call(s,f)}:s[a]=(...c)=>{let f=l.apply(s,c);return f===!1&&(f=u.apply(s,c)),f}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return oe.lex(t,n??this.defaults)}parser(t,n){return ae.parse(t,n??this.defaults)}#e(t,n){return(i,r)=>{const s={...r},o={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>n(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let l=t(i,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let u=n(l,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(l){return a(l)}}}#t(t,n){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+Z(i.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(i);throw i}}}const Ne=new Xa;function S(e,t){return Ne.parse(e,t)}S.options=S.setOptions=function(e){return Ne.setOptions(e),S.defaults=Ne.defaults,Xr(S.defaults),S};S.getDefaults=Cn;S.defaults=Ce;S.use=function(...e){return Ne.use(...e),S.defaults=Ne.defaults,Xr(S.defaults),S};S.walkTokens=function(e,t){return Ne.walkTokens(e,t)};S.parseInline=Ne.parseInline;S.Parser=ae;S.parser=ae.parse;S.Renderer=Dt;S.TextRenderer=Gn;S.Lexer=oe;S.lexer=oe.lex;S.Tokenizer=$t;S.Hooks=vt;S.parse=S;S.options;const Qa=S.setOptions;S.use;S.walkTokens;S.parseInline;const Ya=S;ae.parse;oe.lex;const os=document.getElementById("input"),xe=document.getElementById("output"),Tt=document.getElementById("submit"),xt=document.getElementById("gemmaStatusBar"),Ke=document.getElementById("loadingIcon"),pe=document.getElementById("promptInputSection"),Et=document.getElementById("progressBar"),At=document.getElementById("promptInspireBtn"),Fi=document.getElementById("loadModelPromptContent");location.href.toLowerCase().indexOf("github.io")>-1;let En;const Ja=await Le.forGenAiTasks(Ss["tasks-genai"].linkPathPrefix.replace(/\/$/,"")),Me={DEFAULT:0,RUNNING:1,UPLOADING:2};function el(){xe.scrollTop=xe.scrollHeight}Qa({highlight:function(e,t){const n=yn.getLanguage(t)?t:"plaintext";return yn.highlight(e,{language:n}).value}});function tl(e,t){if(xe.innerHTML+=e,t)if(!xe.innerHTML)xe.innerHTML="Result is empty";else{const n=Ya(xe.innerHTML),i=Es.sanitize(n);xe.innerHTML=i,document.querySelectorAll("pre code").forEach(r=>{yn.highlightBlock(r)})}el()}Tt.onclick=async()=>{En&&(Ut(Me.RUNNING),xe.innerHTML="",await En.generateResponse(os.value,tl),Ut(Me.DEFAULT))};At.addEventListener("click",()=>{const e=["def fibonacci","def quicksort","Running AI on Web can","def merge_sort","function bubbleSort","please give a quick introduction about WebAI",`<start_of_turn>user
What is WebAI<end_of_turn>
<start_of_turn>model`];os.value=e[Math.floor(Math.random()*e.length)]});function Ut(e){e===Me.RUNNING?(At.disabled=!0,Tt.disabled=!0,Gi(Ke),pe.classList.contains("running-mode")||pe.classList.add("running-mode"),pe.querySelector("textarea").setAttribute("readonly",!0)):e===Me.DEFAULT?(At.disabled=!1,Tt.disabled=!1,Ke.classList.contains("hidden")||Ke.classList.add("hidden"),pe.classList.contains("running-mode")&&pe.classList.remove("running-mode"),pe.querySelector("textarea").removeAttribute("readonly")):e===Me.UPLOADING&&(At.disabled=!1,Tt.disabled=!1,Ke.classList.contains("hidden")||Ke.classList.add("hidden"),pe.classList.contains("running-mode")||pe.classList.add("running-mode"),pe.querySelector("textarea").setAttribute("readonly",!0))}document.getElementById("upload").addEventListener("change",function(e){const t=e.target.files[0];if(!t)return;const n=new FileReader,i=new Date().getTime();n.onprogress=function(r){if(r.lengthComputable){const s=r.loaded,o=r.total;Ut(Me.UPLOADING),Gi(Et),Et.innerHTML=`
    <div class="relative px-2 z-20" id="StatusText"></div>
    <div class="relative px-2 z-20">
      <span id="ProgressVal">0%</span>
    </div>
    <div
      id="ProgressBar"
      class="absolute top-0 rounded-2xl z-10 text-right bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"
    ></div>
 `;const a=document.getElementById("StatusText"),l=document.getElementById("ProgressBar"),u=document.getElementById("ProgressVal");xt.textContent="loading",Qn("loading",xt);let c=s/o*100;a.textContent="Uploading model ...",l.style.height||(l.style.height="30px"),l.style.width=`${c}%`,u.textContent=`${Jt(s)}/${Jt(o)}`}},n.onload=function(r){const s=new Uint8Array(r.target.result);console.log("ArrayBuffer...",s.byteLength),z.createFromOptions(Ja,{baseOptions:{modelAssetBuffer:s},maxTokens:1e3,topK:40,temperature:.8,randomSeed:101}).then(o=>{En=o;const a=new Date().getTime();xt.textContent=`loaded in ${(a-i)/1e3}s (${Jt(s.byteLength)})`,Qn("loaded",xt),Et.classList.contains("hidden")||Et.classList.add("hidden"),Fi.classList.contains("hidden")||Fi.classList.add("hidden"),Ut(Me.DEFAULT)}).catch(()=>{alert("Failed to initialize the task.")})},n.onerror=function(r){console.error("FileReader error:",r)},n.readAsArrayBuffer(t)});ys("../..");xs("../..");
